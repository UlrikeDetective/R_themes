ggspatial::annotation_map_tile(
type = "osm",
cachedir = "maps/",
zoomin = -1) +
geom_sf(aes(color = Elevation)) +
scale_color_viridis_c() +
theme_void() +
labs(
title = paste("Elevation Profile: Ibiza", as.Date(treks_ibiza$Time)),
caption = "Tiles © OpenStreetMap (ODBL license)"
)
files <- list.files(path = "/Users/ulrike_imac_air/projects/Trial_and_error/R_code/Ibiza",
pattern = "\\.gpx$",
full.names = TRUE)
data_list <- list()
i <- 1
for (file in files) {
data <- read_gpx(file)[[2]][[1]]
data$id = i
i <- i + 1
data_list[[file]] <- data
}
tracks_ibiza <- dplyr::bind_rows(data_list)
str(tracks_ibiza)
treks_ibiza <- tracks_ibiza |>
st_as_sf(coords = c("Longitude","Latitude"),
crs = 4326)
str(treks_ibiza)
library(ggplot2)
library(ggspatial)
ggplot(data = treks_ibiza) +
ggspatial::annotation_map_tile(
type = "osm",
cachedir = "maps/",
zoomin = -1) +
geom_sf(aes(color = Elevation)) +
scale_color_viridis_c() +
theme_void() +
labs(
title = paste("Elevation Profile: Ibiza", as.Date(treks_ibiza$Time)),
caption = "Tiles © OpenStreetMap (ODBL license)"
)
files <- list.files(path = "/Users/ulrike_imac_air/projects/Trial_and_error/R_code/Ibiza",
pattern = "\\.gpx$",
full.names = TRUE)
data_list <- list()
i <- 1
for (file in files) {
data <- read_gpx(file)[[2]][[1]]
data$id = i
i <- i + 1
data_list[[file]] <- data
}
tracks_ibiza <- dplyr::bind_rows(data_list)
str(tracks_ibiza)
treks_ibiza <- tracks_ibiza |>
st_as_sf(coords = c("Longitude","Latitude"),
crs = 4326)
str(treks_ibiza)
library(ggplot2)
library(ggspatial)
ggplot(data = treks_ibiza) +
ggspatial::annotation_map_tile(
type = "osm",
cachedir = "maps/",
zoomin = -1) +
geom_sf(aes(color = Elevation)) +
scale_color_viridis_c() +
theme_void() +
labs(
title = paste("Elevation Profile: Ibiza", as.Date(treks_ibiza$Time)),
caption = "Tiles © OpenStreetMap (ODBL license)"
)
trek_proj_ibiza <- treks_ibiza |> st_transform(crs = 32113)
distance <- treks_ibiza |>
st_transform(crs = 32113) |>
dplyr::summarise(do_union = F) |>
st_cast("LINESTRING") |>
st_length()
print(paste("Total distance", round(distance/1000, digits = 1), "kilometers"))
data.frame(
"Elevation" = c("Maximum",
"Minimum",
"Average",
"Initial",
"Final"),
"Meters" = c(max(treks_ibiza$Elevation),
min(treks_ibiza$Elevation),
round(mean(treks_ibiza$Elevation)),
treks_ibiza[1,]$Elevation,
trek[length(treks_ibiza),]$Elevation)
)
ggplot(treks_ibiza, aes(x = Time, y = Elevation)) +
geom_line() +
ggtitle(paste("Elevation Profile ibiza walks", as.Date(trek[1,]$Time)))
treks_ibiza <- treks_ibiza %>%
mutate(
Date = as.Date(Time),
TimeOfDay = hms::as_hms(Time)   # keeps only HH:MM:SS
)
ggplot(treks_ibiza, aes(x = TimeOfDay, y = Elevation)) +
geom_line() +
facet_wrap(~ Date) +
labs(
title = "Elevation Profile Ibiza walks",
x = "Time of day",
y = "Elevation (m)"
) +
theme_minimal()
# loading CSV files in
June_2025 <- read.csv('/Users/ulrike_imac_air/projects/analysis_my_life/data/Google_Data/2025/Google2025_03.csv')
# loading CSV files in
October_2025 <- read.csv('/Users/ulrike_imac_air/projects/analysis_my_life/data/Google_Data/2025/Google2025_03.csv')
head(October_2025)
str(October_2025)
head(October_2025$startTime)
names(October_2025)[names(October_2025) == "startTime"] <- "startTime"
head(October_2025)
library(lubridate)
# Fix parsing
October_2025$startTime <- ymd_hms(October_2025$startTime, truncated = 3)
head(October_2025)
# loading CSV files in
October_2025 <- read.csv('/Users/ulrike_imac_air/projects/analysis_my_life/data/Google_Data/2025/Google2025_03.csv')
head(October_2025)
names(October_2025)[names(October_2025) == "startTime"] <- "startTime"
head(October_2025)
names(October_2025)[names(October_2025) == "startTime"] <- "startTime"
head(October_2025)
head(October_2025$startTime, 10)
# loading CSV files in
October_2025 <- read.csv('/Users/ulrike_imac_air/projects/analysis_my_life/data/Google_Data/2025/Google2025_03.csv')
head(October_2025)
str(October_2025)
head(October_2025$startTime)
head(October_2025$startTime, 10)
names(October_2025)[names(October_2025) == "startTime"] <- "startTime"
head(October_2025)
head(October_2025$startTime, 10)
str(October_2025)
head(October_2025$startTime)
library(lubridate)
# Fix parsing
October_2025$startTime <- ymd_hms(October_2025$startTime)
head(October_2025$StartTime, 10)
names(October_2025)[names(October_2025) == "StartTime"] <- "StartTime"
head(October_2025)
library(lubridate)
# Fix parsing
October_2025$StartTime[October_2025$StartTime == ""] <- NA
October_2025$StartTime <- ymd_hms(October_2025$StartTime)
# Extract Date
October_2025$StartDate <- as.Date(October_2025$StartTime)
# Extract Time
October_2025$StartTime <- format(October_2025$StartTime, format = "%H:%M:%S")
# Fix parsing
October_2025$endTime <- ymd_hms(October_2025$endTime, truncated = 3)
library(lubridate)
# Fix parsing
October_2025$StartTime[October_2025$StartTime == ""] <- NA
October_2025$StartTime <- ymd_hms(October_2025$StartTime)
# Extract Date
October_2025$StartDate <- as.Date(October_2025$StartTime)
# Extract Time
October_2025$StartTime <- format(October_2025$StartTime, format = "%H:%M:%S")
# Fix parsing
October_2025$EndTime <- ymd_hms(October_2025$EndTime, truncated = 3)
# Extract Date
October_2025$EndDate <- as.Date(October_2025$EndTime)
# Extract Time
October_2025$EndTime <- format(October_2025$EndTime, format = "%H:%M:%S")
head(October_2025)
# loading CSV files in
October_2025 <- read.csv('/Users/ulrike_imac_air/projects/analysis_my_life/data/Google_Data/2025/Google2025_03.csv')
# loading CSV files in
October_2025 <- read.csv('/Users/ulrike_imac_air/projects/analysis_my_life/data/Google_Data/2025/Google2025_03.csv')
head(October_2025)
str(October_2025)
head(October_2025$StartTime)
head(October_2025$StartTime, 10)
library(lubridate)
# Fix parsing
October_2025$StartTime <- ymd_hms(October_2025$StartTime)
# Extract Date
October_2025$StartDate <- as.Date(October_2025$StartTime)
# Extract Time
October_2025$StartTime <- format(October_2025$StartTime, format = "%H:%M:%S")
# Fix parsing
October_2025$EndTime <- ymd_hms(October_2025$EndTime, truncated = 3)
# Extract Date
October_2025$EndDate <- as.Date(October_2025$EndTime)
# Extract Time
October_2025$EndTime <- format(October_2025$EndTime, format = "%H:%M:%S")
head(October_2025)
colnames(October_2025)
# Remove "geo:" and split into two columns
coords <- sub("geo:", "", October_2025$PlaceLocation)  # Remove "geo:"
coords_split <- strsplit(coords, ",")
# Extract latitude and longitude
October_2025$place_latitude <- as.numeric(sapply(coords_split, `[`, 1))
October_2025$place_longitude <- as.numeric(sapply(coords_split, `[`, 2))
October_2025
# Remove "geo:" and split into two columns
coords <- sub("geo:", "", October_2025$start_location)  # Remove "geo:"
coords_split <- strsplit(coords, ",")
# Extract latitude and longitude
October_2025$start_latitude <- as.numeric(sapply(coords_split, `[`, 1))
# loading CSV files in
October_2025 <- read.csv('/Users/ulrike_imac_air/projects/analysis_my_life/data/Google_Data/2025/Google2025_03.csv')
head(October_2025)
library(lubridate)
# Fix parsing
October_2025$StartTime <- ymd_hms(October_2025$StartTime)
# Extract Date
October_2025$StartDate <- as.Date(October_2025$StartTime)
# Extract Time
October_2025$StartTime <- format(October_2025$StartTime, format = "%H:%M:%S")
# Fix parsing
October_2025$EndTime <- ymd_hms(October_2025$EndTime, truncated = 3)
# Extract Date
October_2025$EndDate <- as.Date(October_2025$EndTime)
# Extract Time
October_2025$EndTime <- format(October_2025$EndTime, format = "%H:%M:%S")
head(October_2025)
colnames(October_2025)
# Remove "geo:" and split into two columns
coords <- sub("geo:", "", October_2025$PlaceLocation)  # Remove "geo:"
coords_split <- strsplit(coords, ",")
# Extract latitude and longitude
October_2025$place_latitude <- as.numeric(sapply(coords_split, `[`, 1))
October_2025$place_longitude <- as.numeric(sapply(coords_split, `[`, 2))
October_2025
colnames(October_2025)
# Remove specific columns using subset
October_2025 <- subset(October_2025, select = -c(StartTime, EndTime, semantic_type, place_id, PlaceLocation, start_location, end_location, probability))
# Remove specific columns using subset
October_2025 <- subset(October_2025, select = -c(StartTime, EndTime, SemanticType, place_id, PlaceLocation, start_location, end_location, Probability))
# Remove specific columns using subset
October_2025 <- subset(October_2025, select = -c(StartTime, EndTime, SemanticType, PlaceID, PlaceLocation, start_location, end_location, Probability))
# Remove specific columns using subset
October_2025 <- subset(October_2025, select = -c(StartTime, EndTime, SemanticType, PlaceID, PlaceLocation, Probability))
October_2025
# loading CSV files in
October_2025 <- read.csv('/Users/ulrike_imac_air/projects/analysis_my_life/data/Google_Data/2025/Google2025_03.csv')
head(October_2025)
library(lubridate)
# Fix parsing
October_2025$StartTime <- ymd_hms(October_2025$StartTime)
# Extract Date
October_2025$StartDate <- as.Date(October_2025$StartTime)
# Extract Time
October_2025$StartTime <- format(October_2025$StartTime, format = "%H:%M:%S")
# Fix parsing
October_2025$EndTime <- ymd_hms(October_2025$EndTime, truncated = 3)
# Extract Date
October_2025$EndDate <- as.Date(October_2025$EndTime)
# Extract Time
October_2025$EndTime <- format(October_2025$EndTime, format = "%H:%M:%S")
head(October_2025)
colnames(October_2025)
# Remove "geo:" and split into two columns
coords <- sub("geo:", "", October_2025$PlaceLocation)  # Remove "geo:"
coords_split <- strsplit(coords, ",")
# Extract latitude and longitude
October_2025$place_latitude <- as.numeric(sapply(coords_split, `[`, 1))
October_2025$place_longitude <- as.numeric(sapply(coords_split, `[`, 2))
October_2025
colnames(October_2025)
# Remove specific columns using subset
October_2025 <- subset(October_2025, select = -c(SemanticType, PlaceID, PlaceLocation, Probability))
October_2025
colnames(October_2025)
# Reorder the columns
October_2025 <- October_2025[, c("StartDate","StartTime", "place_latitude", "place_longitude", "LatitudeStart", "LongitudeStart", "EndDate", "EndTime", "LatitudeEnd", "LongitudeEnd", "Type", "ActivityType", "Distance")]
October_2025
library(dplyr)
# Split into two dataframes: visits and activities
visits <- October_2025 %>%
filter(type == "visit") %>%
transmute(
Date = StartDate,
Time = StartTime,
lat = place_latitude,
lon = place_longitude,
Type,
ActivityType,
Distance
)
library(dplyr)
# Split into two dataframes: visits and activities
visits <- October_2025 %>%
filter(Type == "visit") %>%
transmute(
Date = StartDate,
Time = StartTime,
lat = place_latitude,
lon = place_longitude,
Type,
ActivityType,
Distance
)
activities_start <- October_2025 %>%
filter(Type == "Activity") %>%
transmute(
Date = StartDate,
Time = StartTime,
lat = LatitudeStart,
lon = LongitudeStart,
Type,
ActivityType,
Distance
)
activities_end <- October_2025 %>%
filter(Type == "Activity") %>%
transmute(
Date = EndDate,
Time = EndTime,
lat = LatitudeEnd,
lon = LongitudeEnd,
Type,
ActivityType,
Distance
)
# Combine everything into one tidy dataset
cleaned_data <- bind_rows(visits, activities_start, activities_end)
# Optional: sort by Date and Time
cleaned_data <- cleaned_data %>%
arrange(Date, Time)
cleaned_data
# loading CSV files in
October_2025 <- read.csv('/Users/ulrike_imac_air/projects/analysis_my_life/data/Google_Data/2025/Google2025_03.csv')
head(October_2025)
library(lubridate)
# Fix parsing
October_2025$StartTime <- ymd_hms(October_2025$StartTime)
# Extract Date
October_2025$StartDate <- as.Date(October_2025$StartTime)
# Extract Time
October_2025$StartTime <- format(October_2025$StartTime, format = "%H:%M:%S")
# Fix parsing
October_2025$EndTime <- ymd_hms(October_2025$EndTime, truncated = 3)
# Extract Date
October_2025$EndDate <- as.Date(October_2025$EndTime)
# Extract Time
October_2025$EndTime <- format(October_2025$EndTime, format = "%H:%M:%S")
# Remove "geo:" and split into two columns
coords <- sub("geo:", "", October_2025$PlaceLocation)  # Remove "geo:"
coords_split <- strsplit(coords, ",")
# Extract latitude and longitude
October_2025$place_latitude <- as.numeric(sapply(coords_split, `[`, 1))
October_2025$place_longitude <- as.numeric(sapply(coords_split, `[`, 2))
October_2025
# Remove specific columns using subset
October_2025 <- subset(October_2025, select = -c(SemanticType, PlaceID, PlaceLocation, Probability))
October_2025
# Reorder the columns
October_2025 <- October_2025[, c("StartDate","StartTime", "place_latitude", "place_longitude", "LatitudeStart", "LongitudeStart", "EndDate", "EndTime", "LatitudeEnd", "LongitudeEnd", "Type", "ActivityType", "Distance")]
October_2025
library(dplyr)
# Split into two dataframes: visits and activities
visits <- October_2025 %>%
filter(Type == "visit") %>%
transmute(
Date = StartDate,
Time = StartTime,
lat = place_latitude,
lon = place_longitude,
Type,
ActivityType,
Distance
)
activities_start <- October_2025 %>%
filter(Type == "activity") %>%
transmute(
Date = StartDate,
Time = StartTime,
lat = LatitudeStart,
lon = LongitudeStart,
Type,
ActivityType,
Distance
)
activities_end <- October_2025 %>%
filter(Type == "activity") %>%
transmute(
Date = EndDate,
Time = EndTime,
lat = LatitudeEnd,
lon = LongitudeEnd,
Type,
ActivityType,
Distance
)
# Combine everything into one tidy dataset
cleaned_data <- bind_rows(visits, activities_start, activities_end)
# Optional: sort by Date and Time
cleaned_data <- cleaned_data %>%
arrange(Date, Time)
cleaned_data
# Save the dataframe to a CSV file
write.csv(cleaned_data, file = "GoogleData_2025:10_cleaned.csv", row.names = FALSE)
library(readxl)
Japan2025 <- read.csv("/Users/ulrike_imac_air/projects/analysis_my_life/data/photos_gps/2025/2025_Japan.csv")
Japan2025
# Remove rows where GPSData is NA or empty
Japan2025 <- Japan2025[!(is.na(Japan2025$GPSData) | Japan2025$GPSData == ""), ]
Japan2025
# Changing the "Date" from chr to date format
library(dplyr)
Japan2025 <- Japan2025 %>%
mutate(Date = as.Date(Date, format = "%Y:%m:%d"))
head(Japan2025)
# Load necessary library if not already loaded
library(dplyr)
library(chron)
# Assuming your dataframe is named Japan2025
Japan2025 <- Japan2025 %>%
mutate(Time = times(Time))
head(Japan2025)
# Extracting the first part of GPSData and putting it in a new column called lat_dms
library(dplyr)
library(stringr)
Japan2025 <- Japan2025 %>%
mutate(lat_dms = str_extract(GPSData, "^[^,]+"))
# Extracting the second part of GPSData and putting it in a new column called lng_dms
Japan2025 <- Japan2025 %>%
mutate(lng_dms = str_extract(GPSData, "(?<=, ).*(?=, )"))
# Extracting the last part of GPSData and putting it in a new column called altitude. And changing data format from chr to integer. Also round values.
Japan2025 <- Japan2025 %>%
mutate(Altitude = round(as.numeric(str_extract(GPSData, "(?<=Altitude: )[^,]+")), 2))
head(Japan2025)
# Converting DMS to decimal degree format. Starting with the latitude
Japan2025 <- Japan2025 %>%
mutate(lat_decimaldegrees = {
# Extract degrees, minutes, seconds, and hemisphere
lat_parts <- str_match(lat_dms, "([0-9.]+)°\\s([0-9.]+)'\\s([0-9.]+)''\\s([NS])")[, 2:5]
# Check if any matches were found, if not return NA
if (is.na(lat_parts[1, 1])) {
return(NA)
}
degrees <- as.numeric(lat_parts[, 1])
minutes <- as.numeric(lat_parts[, 2])
seconds <- as.numeric(lat_parts[, 3])
hemisphere <- lat_parts[, 4]
# Calculate decimal degrees
decimal_degrees <- degrees + minutes / 60 + seconds / 3600
# Apply positive or negative sign based on hemisphere
ifelse(hemisphere == "N", decimal_degrees, -decimal_degrees)
})
# Converting DMS to decimal degree format. Second the longitude
Japan2025 <- Japan2025 %>%
mutate(lng_decimaldegrees = {
# Extract degrees, minutes, seconds, and hemisphere
lng_parts <- str_match(lng_dms, "([0-9.]+)°\\s([0-9.]+)'\\s([0-9.]+)''\\s([EW])")[, 2:5]
# Check if any matches were found, if not return NA
if (is.na(lng_parts[1, 1])) {
return(NA)
}
degrees <- as.numeric(lng_parts[, 1])
minutes <- as.numeric(lng_parts[, 2])
seconds <- as.numeric(lng_parts[, 3])
hemisphere <- lng_parts[, 4]
# Calculate decimal degrees
decimal_degrees <- degrees + minutes / 60 + seconds / 3600
# Apply positive or negative sign based on hemisphere
ifelse(hemisphere == "E", decimal_degrees, -decimal_degrees)
})
head(Japan2025)
# reorder the columns like this: Date, Time, GPSData, lat_dms, lng_dms, Altitude, lat_decimaldegrees, lng_decimaldegrees, region
# Reorder the columns
Japan2025 <- Japan2025[, c("ImageName","Date", "Time", "lat_decimaldegrees", "lng_decimaldegrees", "Altitude", "GPSData", "lat_dms", "lng_dms")]
head(Japan2025)
# arrange entries after Date and time
library(dplyr)
# Assuming your dataframe is named Japan2025
Japan2025 <- Japan2025 %>%
arrange(Date, Time)
Japan2025
# Load necessary library if not already loaded
library(dplyr)
# Assuming your dataframe is named Japan2025
Japan2025 <- Japan2025 %>%
rename(lat = lat_decimaldegrees)
Japan2025 <- Japan2025 %>%
rename(lon = lng_decimaldegrees)
Japan2025 <- Japan2025 %>%
rename(elevation = Altitude)
head(Japan2025, 20)
Japan2025 <- Japan2025 %>%
rename(ID = ImageName)
# Add the prefix 'IPhone_Q4_' to each entry in the ID column
Japan2025$ID <- paste0("IPhone_", Japan2025$ID)
Japan2025
# Remove specific columns using subset
Japan2025 <- subset(Japan2025, select = -c(GPSData, lat_dms, lng_dms))
Japan2025
# Extract the year from the Date column and add it as a new column named Year
Japan2025$Year <- format(Japan2025$Date, "%Y")
# Reorder the columns
Japan2025 <- Japan2025[, c("ID", "Year", "Date", "Time", "lat", "lon", "elevation")]
Japan2025
# Save the dataframe to a CSV file
write.csv(Japan2025, file = "Japan2025_cleaned.csv", row.names = FALSE)
library(colorify)
install.packages(colorify)
install.packages("viridisLite")
library(viridisLite)
base_colors <- viridis(4)
library(colorspace)
sales_palette <- base_colors |> lighten(0.2) |> saturate(0.2)
install.packages("colorspace")
base_colors <- qualitative_hcl(4, palette = "viridis")
